<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Taste of Türkiye Food Truck</title>
  <link rel="icon" href="/assets/favicon.png">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root { --primary: #e10600; --light: #ffffff; }
    *, *::before, *::after { box-sizing: border-box; }
    body, html { margin: 0; padding: 0; font-family: 'Montserrat', sans-serif; background: var(--light); color: #333; }
    h1,h2,h3 { text-transform: uppercase; font-weight: 700; }
    /* Navigation */
    nav { position: fixed; top: 0; width: 100%; display: flex; justify-content: space-between; align-items: center; padding: 1rem 2rem; background: rgba(0,0,0,0.6); z-index: 100; }
    #nav-links { display: flex; gap: 2rem; }
    nav a { color: #fff; text-decoration: none; transition: opacity .3s; }
    nav a:hover { opacity: .7; }
    .nav-toggle { display: none; background: none; border: none; color: #fff; font-size: 2rem; cursor: pointer; }

    /* Header */
    header { position: relative; height: 70vh; background: url('/assets/header-image.jpg') center/cover no-repeat; display: flex; align-items: center; justify-content: center; padding-top: 60px; overflow: hidden; }
    header::before { content: ''; position: absolute; inset: 0; background: linear-gradient(to bottom, rgba(225,6,0,0.6) 0%, rgba(225,6,0,0) 100%); z-index: 1; }
    .truck-image { position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); max-width: 80%; z-index: 2; }
    header .header-content { position: relative; text-align: center; color: var(--light); z-index: 3; }
    header .header-content h1 { font-size: 4rem; margin: 0; letter-spacing: 2px; }
    header .header-content p { font-size: 1.25rem; margin: .5rem 0 0; font-weight: 400; text-transform: none; }

    /* Sections */
    .section { padding: 60px 20px; max-width: 1000px; margin: auto; }

    /* Daily Specials */
    .specials-wrapper { display: flex; gap: 2rem; align-items: flex-start; }
    .special-list { display: flex; flex-direction: column; gap: 1rem; }
    .special-item img { width: 100%; border-radius: 8px; display: block; }
    .special-info { flex: 1; }

    /* Schedule toggles & layout */
    .toggle-btn { margin-bottom: 1rem; padding: 8px 16px; background: var(--primary); color: #fff; border: none; border-radius: 4px; cursor: pointer; }
    #schedule-table { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
    .schedule-entry { border: 1px solid #ccc; border-radius: 8px; background: rgba(255,255,255,0.9); padding: 16px; display: flex; flex-direction: column; justify-content: space-between; }
    .schedule-entry p { margin: 4px 0; line-height: 1.4; }
    .schedule-entry .date { white-space: nowrap; font-weight: normal; }
    .schedule-entry .time { font-style: italic; font-weight: normal; }
    .schedule-entry .location strong { display: block; font-weight: 700; }
    .schedule-entry .address-line { margin-left: 1em; }
    .order-now { margin-top: 12px; padding: 10px; background: var(--primary); color: #fff; text-align: center; border-radius: 4px; text-decoration: none; }

    /* Menu embed */
    .external-menu-btn { display: none; background: var(--primary); color: #fff; text-decoration: none; padding: 12px; border-radius: 4px; font-weight: 700; text-align: center; margin-bottom: 20px; }
    .menu-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; }

    /* Instagram */
    #instagram blockquote { margin: 0 auto; max-width: 700px; width: 100%; }
    .social-links { margin-top: 1rem; }
    .social-links img { width: 24px; vertical-align: middle; margin-right: 8px; }

    /* Responsive: Mobile */
    @media (max-width: 768px) {
      /* Hamburger menu */
      .nav-toggle { display: block; }
      #nav-links { display: none; flex-direction: column; background: rgba(0,0,0,0.8); position: absolute; top: 60px; right: 20px; padding: 1rem; border-radius: 8px; }
      nav.open #nav-links { display: flex; }

      /* Specials images match info height */
      .specials-wrapper { display: flex; align-items: stretch; }
      .special-list, .special-info { flex: 1; }
      .special-list { display: flex; flex-direction: column; }
      .special-item { flex: 1; display: flex; align-items: center; justify-content: center; }
      .special-item img { height: 100%; width: auto; object-fit: cover; }

      /* Menu button only */
      .menu-list { display: none; }
      .external-menu-btn { display: block; width: 100%; }
    }
  </style>
</head>
<body>
  <nav>
    <button id="nav-toggle" class="nav-toggle" aria-label="Menu">☰</button>
    <div id="nav-links">
      <a href="#home">Home</a>
      <a href="#schedule">Location & Schedule</a>
      <a href="#menu">Menu</a>
      <a href="#contact">Contact</a>
    </div>
  </nav>

  <header id="home">
    <img src="/assets/trucktransp.png" alt="Food Truck" class="truck-image">
    <div class="header-content">
      <h1>Taste of Türkiye</h1>
      <p>Serving Naples, FL and Collier County, FL</p>
    </div>
  </header>

  <section class="section" id="specials">
    <div class="specials-wrapper">
      <div class="special-list">
        <div class="special-item">
          <img src="assets/zucchiniround.png" alt="Zucchini Lavash Plate">
          <div class="name">Zucchini Lavash Plate</div>
        </div>
        <div class="special-item">
          <img src="assets/steakround.png" alt="Steak over Fries Plate">
          <div class="name">Steak over Fries Plate</div>
        </div>
        <div class="special-item">
          <img src="assets/adanaround.png" alt="Adana Kebab Wrap">
          <div class="name">Adana Kebab Wrap</div>
        </div>
      </div>
      <div class="special-info">
        <h2>Turkish Taste, Global Vision</h2>
        <p>Come try our authentic Turkish favorites and our updated versions of the classics. All food is made fresh to order and <strong>handcrafted with love</strong>.</p>
      </div>
    </div>
  </section>

  <section class="section" id="schedule">
    <h2>Location & Schedule</h2>
    <button id="toggle-schedule" class="toggle-btn">Show All Upcoming</button>
    <div id="schedule-table">Loading schedule...</div>
  </section>

  <section class="section" id="menu">
    <h2>Our Menu</h2>
    <a href="https://tasteofturkiye.square.site/" class="external-menu-btn">View Full Menu & Order</a>
    <div class="menu-list"></div>
  </section>

  <section class="section" id="instagram">
    <h2>Follow on Instagram</h2>
    <blockquote class="instagram-media" data-instgrm-permalink="https://www.instagram.com/tasteofturkiyenaples/" data-instgrm-version="14"></blockquote>
    <script async src="//www.instagram.com/embed.js"></script>
  </section>

  <footer id="contact" class="section">
    <h2>Contact</h2>
    <p>Questions? Email us at <a href="mailto:info@deliciouseats.com">info@deliciouseats.com</a>.</p>
    <div class="social-links">
      <h3>Follow Us</nokia
      <a href="https://www.facebook.com/profile.php?id=61571525739101" target="_blank" rel="noopener noreferrer">
        <img src="/assets/facebook-icon.png" alt="Facebook">Facebook
      </a>
    </div>
  </footer>
  <script>
    // Navigation toggle
    const nav = document.querySelector('nav');
    document.getElementById('nav-toggle').addEventListener('click', () => nav.classList.toggle('open'));
    document.addEventListener('DOMContentLoaded', async () => {
      const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTdMqZPmukxvZTx-hCz-0aMQB5Ul86uOzDoABhTZl1zZXoWqgUrTNpUYRFZ5rn0XSKESsEXGAhNFzY-/pub?gid=1518864604&single=true&output=csv';
      const container = document.getElementById('schedule-table');
      const toggleBtn = document.getElementById('toggle-schedule');
      let allEntries = [];
      try {
        const raw = await fetch(csvUrl).then(r => r.ok ? r.text() : Promise.reject());
        // stitch quoted multiline rows
        const rows = [];
        let buffer = '', inQ = false;
        raw.split(/\r?\n/).forEach(line => {
          buffer += (inQ ? '\n' : '') + line;
          const qc = (line.match(/"/g)||[]).length;
          if (qc % 2) inQ = !inQ;
          if (!inQ) { rows.push(buffer); buffer = ''; }
        });
        // skip header
        const data = rows.slice(1);
        const today = new Date(), weekAhead = new Date(); weekAhead.setDate(today.getDate()+7);
        data.forEach(row => {
          const cells = row.split(/,(?=(?:[^"]*"[^"]*")*[^\"]*$)/).map(c=>c.replace(/^"|"$/g,'').trim());
          const [day,date,start,end,loc,pub,addressRaw] = cells;
          const dateObj = new Date(`${date} ${new Date().getFullYear()}`);
          const formattedDate = `${day}, ${date}`;
          const timeRange = start && end ? `${start} to ${end}` : (start||end||'');
          const [street='',cityState=''] = addressRaw.split(/\r?\n/).map(s=>s.trim());
          allEntries.push({ dateObj, formattedDate, timeRange, loc, pub, street, cityState });
        });
        // render
        function render(filterWeek=true) {
          container.innerHTML='';
          allEntries.forEach(e=>{
            const isFuture = e.dateObj>=today;
            const isWeek = e.dateObj<=weekAhead;
            const hide = filterWeek ? !(isFuture && isWeek) : !isFuture;
            const div = document.createElement('div');
            div.className = 'schedule-entry' + (hide?' hidden':'');
            div.innerHTML = `<p class="date">${e.formattedDate}</p>
                             <p class="time">${e.timeRange}</p>
                             <p class="location"><strong>${e.loc}${e.pub?` (${e.pub})`:''}</strong></p>
                             <p class="address-line">${e.street}</p>
                             <p class="address-line">${e.cityState}</p>`;
            container.appendChild(div);
          });
        }
        render(true);
        let showingAll = false;
        toggleBtn.onclick = () => {
          showingAll = !showingAll;
          render(!showingAll);
          toggleBtn.textContent = showingAll? 'Show Next 7 Days' : 'Show All Upcoming';
        };
      } catch {
        container.textContent = 'Failed to load schedule.';
      }
    });
  </script>
</body>
</html>
